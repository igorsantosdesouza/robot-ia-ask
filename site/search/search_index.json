{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Olha essa  m\u00e1gica","text":"<p>               Bases: <code>BaseModel</code></p> <p>Essa \u00e9 a classe de vendas do meu banco de dados</p> <p>Modelo de dados para as vendas.</p> <p>Parameters:</p> Name Type Description Default <code>email</code> <code>EmailStr</code> <p>email do comprador</p> required <code>data</code> <code>datetime</code> <p>data de compra </p> required <code>valor</code> <code>PositiveFloat</code> <p>valor da compra </p> required <code>produto</code> <code>Positiveint</code> <p>nome do produto </p> required <code>quantidade</code> <code>Positiveint</code> <p>quantidade de produto</p> required <code>produto</code> <code>ProdutoEnum</code> <p>Categoria do produto</p> required Source code in <code>contrato.py</code> <pre><code>class Vendas(BaseModel):\n    \"\"\"\n    Essa \u00e9 a classe de vendas do meu banco de dados\n\n    Modelo de dados para as vendas.\n\n    Args:\n        email (EmailStr): email do comprador\n        data (datetime): data de compra \n        valor (PositiveFloat): valor da compra \n        produto (Positiveint): nome do produto \n        quantidade (Positiveint): quantidade de produto\n        produto (ProdutoEnum): Categoria do produto \n    \"\"\"\n\n    email: EmailStr\n    date: datetime\n    valor: PositiveFloat\n    quantidade: PositiveInt\n    produto: ProdutEnum\n</code></pre> <p>Fun\u00e7\u00e3o para salvar no postgres</p> Source code in <code>database.py</code> <pre><code>def salvar_no_postgres(dados: Vendas):\n    \"\"\"\n    Fun\u00e7\u00e3o para salvar no postgres\n    \"\"\"\n    DB_USER = os.getenv(\"DB_USER_PROD\")\n    DB_NAME = os.getenv(\"DB_NAME_PROD\")\n    DB_HOST = os.getenv(\"DB_HOST_PROD\")\n    DB_PASS = os.getenv(\"DB_PASS_PROD\")\n    try: \n        conn = psycopg2.connect(\n            host=DB_HOST,\n            database=DB_NAME,\n            user=DB_USER,\n            password=DB_PASS\n        )\n        cursor= conn.cursor() # \u00e9 uma sequ\u00eancia de inser\u00e7\u00e3o no banco de dados\n\n        insert_query = sql.SQL(\n            \"INSERT INTO vendas (email, date, valor, quantidade, produto) VALUES(%s, %s, %s, %s, %s)\"\n        ) \n        cursor.execute(insert_query, (\n            dados.email,\n            dados.date,\n            dados.valor,\n            dados.quantidade,\n            dados.produto.value\n        ))\n        conn.commit()\n        cursor.close()\n        conn.close()\n        st.success(\"Dados salvos com sucesso no banco de dados!\")\n    except Exception as e:\n        st.error(f\"Erro ao Salvar no banco de dados: {e}\")\n</code></pre>"}]}